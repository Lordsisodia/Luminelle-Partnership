../src/lib/supabase.ts:1:export { createSupabaseClient, isSupabaseConfigured, supabase } from '@platform/storage/supabase'
../functions/api/newsletter/subscribe.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/newsletter/subscribe.ts:31:  const supabase = getSupabase(env)
../functions/api/newsletter/subscribe.ts:32:  const { data, error } = await supabase
../functions/api/orders/by-name.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/orders/by-name.ts:18:  const supabase = getSupabase(env)
../functions/api/orders/by-name.ts:19:  const { data, error } = await supabase.from('ShopOrders').select('*').eq('name', name).limit(1)
../src/lib/utils/cdn.ts:16:  // TEMP: The Supabase CDN bucket is missing the shower-cap spotlight image,
../functions/api/orders/by-email.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/orders/by-email.ts:17:  const supabase = getSupabase(env)
../functions/api/orders/by-email.ts:18:  const { data, error } = await supabase
../functions/api/orders/get.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/orders/get.ts:17:  const supabase = getSupabase(env)
../functions/api/orders/get.ts:18:  const { data, error } = await supabase.from('ShopOrders').select('*').eq('order_id', id).limit(1)
../functions/api/experiment/config.ts:2:import { getSupabase } from '../../_lib/supabase'
../functions/api/experiment/config.ts:8:  const supabase = getSupabase(env)
../functions/api/experiment/config.ts:9:  const { data, error } = await supabase
../src/hooks/useSyncUserToSupabase.ts:3:import { createSupabaseClient, supabase } from '@platform/storage/supabase'
../src/hooks/useSyncUserToSupabase.ts:20:export const useSyncUserToSupabase = () => {
../src/hooks/useSyncUserToSupabase.ts:47:      const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/hooks/useSyncUserToSupabase.ts:48:      const client = token ? createSupabaseClient(token) : supabase
../src/hooks/useSyncUserToSupabase.ts:52:        console.error('Failed to sync Clerk user to Supabase', error)
../functions/api/experiment/track.ts:2:import { getSupabase } from '../../_lib/supabase'
../functions/api/experiment/track.ts:40:  const supabase = getSupabase(env)
../functions/api/experiment/track.ts:43:    const { error } = await supabase.from('experiment_exposures').insert(exposures)
../functions/api/experiment/track.ts:48:    const { error } = await supabase.from('events').insert(events)
../api/_lib/README.md:2:Express webhook/dev server for local integration tests (Shopify/Clerk/Supabase). Not shipped to the client bundle. Keep API logic domain-agnostic; per-domain handlers should live with the domain and be imported here.
../server/README.md:6:- `server/migrations/*` — SQL migrations intended to be run in Supabase (e.g. via Supabase SQL editor or `psql`).
../functions/api/exports/orders.ts:2:import { getSupabase } from '../../_lib/supabase'
../functions/api/exports/orders.ts:33:  const supabase = getSupabase(env)
../functions/api/exports/orders.ts:34:  const { data, error } = await supabase
../api/internal/recovery-cron.ts:5:  // TODO: hook into Supabase + Resend; for now, return not implemented.
../functions/api/exports/customers.ts:2:import { getSupabase } from '../../_lib/supabase'
../functions/api/exports/customers.ts:21:  const supabase = getSupabase(env)
../functions/api/exports/customers.ts:22:  const { data, error } = await supabase
../functions/api/shopify/webhooks/fulfillments-create.ts:4:import { getSupabase } from '../../../_lib/supabase'
../functions/api/shopify/webhooks/fulfillments-create.ts:60:  const supabase = getSupabase(env)
../functions/api/shopify/webhooks/fulfillments-create.ts:61:  const { data: existing, error: readError } = await supabase
../functions/api/shopify/webhooks/fulfillments-create.ts:79:    const { error: updateError } = await supabase
../functions/api/shopify/webhooks/fulfillments-create.ts:106:      await supabase.from('customers').upsert(
../functions/api/shopify/webhooks/fulfillments-create.ts:111:      const { error: insertError } = await supabase.from('loyalty_points_ledger').insert([
../functions/api/shopify/webhooks/app-uninstalled.ts:4:import { getSupabase } from '../../../_lib/supabase'
../functions/api/shopify/webhooks/app-uninstalled.ts:22:    const supabase = getSupabase(env)
../functions/api/shopify/webhooks/app-uninstalled.ts:23:    await supabase.from('Session').delete().eq('id', `offline_${shop}`)
../functions/api/shopify/webhooks/shop-redact.ts:4:import { getSupabase } from '../../../_lib/supabase'
../functions/api/shopify/webhooks/shop-redact.ts:19:  const supabase = getSupabase(env)
../functions/api/shopify/webhooks/shop-redact.ts:20:  const { error } = await supabase.from('ShopCustomers').delete().eq('shop', String(shop))
../functions/api/shopify/webhooks/orders-updated.ts:6:import { getSupabase } from '../../../_lib/supabase'
../functions/api/shopify/webhooks/orders-updated.ts:70:      const supabase = getSupabase(env)
../functions/api/shopify/webhooks/orders-updated.ts:72:      const { data: order, error: orderError } = await supabase
../functions/api/shopify/webhooks/orders-updated.ts:85:        await supabase.from('customers').upsert(
../functions/api/shopify/webhooks/orders-updated.ts:91:        const { data: awarded, error: awardError } = await supabase
../functions/api/shopify/webhooks/orders-updated.ts:104:          const { error: insertError } = await supabase.from('loyalty_points_ledger').insert([
../functions/api/shopify/session.ts:2:import { getSupabase } from '../../_lib/supabase'
../functions/api/shopify/session.ts:12:  const supabase = getSupabase(env)
../functions/api/shopify/session.ts:13:  const { data, error } = await supabase.from('Session').select('id').eq('id', `offline_${shop}`).limit(1)
../functions/api/shopify/auth/callback.ts:5:import { getSupabase } from '../../../_lib/supabase'
../functions/api/shopify/auth/callback.ts:34:  const supabase = getSupabase(env)
../functions/api/shopify/auth/callback.ts:35:  const { error } = await supabase.from('Session').upsert(
../server/migrations/2025-12-31_newsletter_signups.sql:3:-- Written by server-only code (Cloudflare Pages Functions) using the Supabase `service_role` key.
../server/migrations/2025-12-16_cms_globals_pdp_spin_wheel.sql:1:-- Store Spin Wheel (welcome wheel) copy in Supabase so PDP has zero hard-coded strings
../functions/api/admin/media/delete.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/media/delete.ts:32:  const supabase = getSupabase(env)
../functions/api/admin/media/delete.ts:35:    const { data, error } = await supabase.from('cms_product_media').delete().eq('id', id).select('id')
../functions/api/admin/media/delete.ts:44:  const { data: product, error: productErr } = await supabase.from('cms_products').select('id').eq('handle', productHandle).maybeSingle()
../functions/api/admin/media/delete.ts:48:  const { data, error } = await supabase.from('cms_product_media').delete().eq('product_id', product.id).eq('path', path).select('id')
../functions/api/admin/media/list.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/media/list.ts:16:  const supabase = getSupabase(env)
../functions/api/admin/media/list.ts:17:  const { data: product, error: productErr } = await supabase.from('cms_products').select('id').eq('handle', handle).maybeSingle()
../functions/api/admin/media/list.ts:21:  const { data, error } = await supabase
../functions/api/admin/media/list-all.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/media/list-all.ts:12:  const supabase = getSupabase(env)
../functions/api/admin/media/list-all.ts:13:  const { data, error } = await supabase
../api/admin/media/delete.ts:2:import { createClient } from '@supabase/supabase-js'
../api/admin/media/delete.ts:6:const { SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY } = process.env
../api/admin/media/delete.ts:17:  if (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {
../api/admin/media/delete.ts:18:    return res.status(500).json({ error: 'Supabase service env missing' })
../api/admin/media/delete.ts:25:  const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)
../api/admin/media/delete.ts:26:  const query = supabase.from('cms_product_media').delete().eq('public_id', public_id)
../functions/api/admin/media/upsert.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/media/upsert.ts:47:  const supabase = getSupabase(env)
../functions/api/admin/media/upsert.ts:48:  const { data: product, error: productErr } = await supabase.from('cms_products').select('id').eq('handle', productHandle).maybeSingle()
../functions/api/admin/media/upsert.ts:61:  const { data, error } = await supabase
../api/admin/media/list.ts:2:import { createClient } from '@supabase/supabase-js'
../api/admin/media/list.ts:4:const { SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY } = process.env
../api/admin/media/list.ts:7:  if (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {
../api/admin/media/list.ts:8:    return res.status(500).json({ error: 'Supabase service env missing' })
../api/admin/media/list.ts:15:  const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)
../api/admin/media/list.ts:16:  const { data, error } = await supabase
../api/admin/media/list-all.ts:2:import { createClient } from '@supabase/supabase-js'
../api/admin/media/list-all.ts:4:const { SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY } = process.env
../api/admin/media/list-all.ts:7:  if (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {
../api/admin/media/list-all.ts:8:    return res.status(500).json({ error: 'Supabase service env missing' })
../api/admin/media/list-all.ts:12:  const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)
../api/admin/media/list-all.ts:13:  const { data, error } = await supabase
../functions/api/admin/orders/list.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/orders/list.ts:108:  const supabase = getSupabase(env)
../functions/api/admin/orders/list.ts:110:  let query = supabase
../api/admin/media/upsert.ts:2:import { createClient } from '@supabase/supabase-js'
../api/admin/media/upsert.ts:4:const { SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY } = process.env
../api/admin/media/upsert.ts:7:  if (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {
../api/admin/media/upsert.ts:8:    return res.status(500).json({ error: 'Supabase service env missing' })
../api/admin/media/upsert.ts:17:  const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY)
../api/admin/media/upsert.ts:18:  const { data, error } = await supabase
../functions/api/admin/orders/get.ts:3:import { getSupabase } from '../../../_lib/supabase'
../functions/api/admin/orders/get.ts:101:  const supabase = getSupabase(env)
../functions/api/admin/orders/get.ts:105:  const { data, error } = await supabase
../server/migrations/2025-12-14_shopify_tables_and_metrics.sql:69:-- Analytics RPCs (called from Cloudflare Functions via Supabase `rpc()`)
../api/storefront/cart/share.ts:14:  // TODO: store snapshot or cartId ref in Supabase/R2 and use snapshotRef instead of inline snapshot.
../server/migrations/2025-12-11_experiments.sql:2:-- Note: adjust auth/role names to match your Supabase project. Service inserts only; readonly selects via reporting role.
../server/migrations/2025-12-11_experiments.sql:91:-- allow inserts from Supabase service role only
../functions/api/metrics/top-skus.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/top-skus.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/top-skus.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_top_skus', { days })
../functions/api/metrics/refund-rate.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/refund-rate.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/refund-rate.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_refund_rate', { days })
../functions/_lib/webhooks.ts:2:import { getSupabase } from './supabase'
../functions/_lib/webhooks.ts:6:  const supabase = getSupabase(env)
../functions/_lib/webhooks.ts:7:  const { data, error } = await supabase.from('ShopWebhookDeliveries').select('id').eq('id', deliveryId).limit(1)
../functions/_lib/webhooks.ts:14:  const supabase = getSupabase(env)
../functions/_lib/webhooks.ts:15:  const { error } = await supabase.from('ShopWebhookDeliveries').upsert([{ id: deliveryId }], { onConflict: 'id' })
../server/migrations/2025-12-14_shopify_rls_lockdown.sql:4:-- Supabase `service_role` key, which bypasses RLS.
../server/migrations/2025-12-14_shopify_rls_lockdown.sql:6:-- Important: Without RLS, these tables would be accessible via the public Supabase anon key.
../functions/api/metrics/refunds-by-sku.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/refunds-by-sku.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/refunds-by-sku.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_refunds_by_sku', { days })
../functions/_lib/shopOrders.ts:2:import { getSupabase } from './supabase'
../functions/_lib/shopOrders.ts:30:  const supabase = getSupabase(env)
../functions/_lib/shopOrders.ts:60:  const { error } = await supabase.from('ShopOrders').upsert([record], { onConflict: 'shop,order_id' })
../functions/_lib/shopOrders.ts:70:  const supabase = getSupabase(env)
../functions/_lib/shopOrders.ts:76:  const { error } = await supabase.from('ShopOrders').update(update).eq('shop', shop).eq('order_id', orderId)
../functions/_lib/customers.ts:2:import { getSupabase } from './supabase'
../functions/_lib/customers.ts:5:  const supabase = getSupabase(env)
../functions/_lib/customers.ts:28:  const { error } = await supabase.from('customers').upsert([record], { onConflict: 'id' })
../functions/_lib/types.ts:2:  // Supabase (server-side)
../functions/_lib/types.ts:3:  SUPABASE_URL?: string
../functions/_lib/types.ts:4:  SUPABASE_SERVICE_ROLE_KEY?: string
../functions/_lib/supabase.ts:1:import { createClient, type SupabaseClient } from '@supabase/supabase-js'
../functions/_lib/supabase.ts:4:type Cached = { key: string; client: SupabaseClient }
../functions/_lib/supabase.ts:7:export function getSupabase(env: Env) {
../functions/_lib/supabase.ts:8:  const url = env.SUPABASE_URL
../functions/_lib/supabase.ts:9:  const key = env.SUPABASE_SERVICE_ROLE_KEY
../functions/_lib/supabase.ts:11:    throw new Error('Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY')
../functions/_lib/shopifyAdmin.ts:2:import { getSupabase } from './supabase'
../functions/_lib/shopifyAdmin.ts:9:  const supabase = getSupabase(env)
../functions/_lib/shopifyAdmin.ts:10:  const { data, error } = await supabase.from('Session').select('accesstoken').eq('id', `offline_${shop}`).limit(1).maybeSingle()
../functions/api/metrics/daily.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/daily.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/daily.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_daily', { days })
../src/domains/client/account/index.ts:8:export * from './hooks/useSyncUserToSupabase'
../functions/_lib/shopCustomers.ts:2:import { getSupabase } from './supabase'
../functions/_lib/shopCustomers.ts:31:  const supabase = getSupabase(env)
../functions/_lib/shopCustomers.ts:55:  const { error } = await supabase.from('ShopCustomers').upsert([record], { onConflict: 'shop,customer_id' })
../functions/_lib/shopCustomers.ts:60:  const supabase = getSupabase(env)
../functions/_lib/shopCustomers.ts:61:  const { error } = await supabase.from('ShopCustomers').delete().eq('shop', shop).eq('customer_id', id)
../functions/_lib/shopCustomers.ts:66:  const supabase = getSupabase(env)
../functions/_lib/shopCustomers.ts:68:    const { error } = await supabase.from('ShopCustomers').delete().eq('shop', shop).eq('customer_id', emailOrId.id)
../functions/_lib/shopCustomers.ts:73:    const { error } = await supabase.from('ShopCustomers').delete().eq('shop', shop).eq('email', emailOrId.email.toLowerCase())
../functions/api/metrics/utm-sources.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/utm-sources.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/utm-sources.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_utm_sources', { days })
../functions/api/metrics/summary.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/summary.ts:10:  const supabase = getSupabase(env)
../functions/api/metrics/summary.ts:11:  const { data, error } = await supabase.rpc('lumelle_metrics_summary')
../functions/api/metrics/repeat.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/repeat.ts:10:  const supabase = getSupabase(env)
../functions/api/metrics/repeat.ts:11:  const { data, error } = await supabase.rpc('lumelle_metrics_repeat')
../src/domains/client/account/hooks/useSyncUserToSupabase.ts:3:import { createSupabaseClient, supabase } from '@platform/storage/supabase'
../src/domains/client/account/hooks/useSyncUserToSupabase.ts:20:export const useSyncUserToSupabase = () => {
../src/domains/client/account/hooks/useSyncUserToSupabase.ts:47:      const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/domains/client/account/hooks/useSyncUserToSupabase.ts:48:      const client = token ? createSupabaseClient(token) : supabase
../src/domains/client/account/hooks/useSyncUserToSupabase.ts:52:        console.error('Failed to sync Clerk user to Supabase', error)
../functions/api/metrics/source-revenue.ts:3:import { getSupabase } from '../../_lib/supabase'
../functions/api/metrics/source-revenue.ts:16:  const supabase = getSupabase(env)
../functions/api/metrics/source-revenue.ts:17:  const { data, error } = await supabase.rpc('lumelle_metrics_source_revenue', { days })
../src/domains/client/account/state/OrdersStore.ts:1:import { createSupabaseClient, supabase } from '@platform/storage/supabase'
../src/domains/client/account/state/OrdersStore.ts:23:  if (authToken) return createSupabaseClient(authToken)
../src/domains/client/account/state/OrdersStore.ts:24:  return supabase
../src/domains/client/account/state/OrdersStore.ts:59:    console.error('Supabase fetchOrders failed; falling back to cache', error)
../src/domains/client/account/state/OrdersStore.ts:80:    console.error(`Supabase fetchOrderById failed for ${id}; using cache`, error)
../src/domains/client/account/state/OrdersStore.ts:99:    console.error('Supabase addOrder failed; order is only saved locally', error)
../src/domains/admin/catalog/data/useProducts.ts:2:import { createSupabaseClient, isSupabaseConfigured } from '@/lib/supabase'
../src/domains/admin/catalog/data/useProducts.ts:33:    if (!isSupabaseConfigured || !token) {
../src/domains/admin/catalog/data/useProducts.ts:42:    const client = createSupabaseClient(token)
../src/domains/admin/catalog/data/useProducts.ts:44:      setError('Supabase is not configured in this environment (missing VITE_SUPABASE_URL / VITE_SUPABASE_ANON_KEY).')
../src/domains/admin/pages/data/pages.ts:150:      { title: 'Vendors', body: 'Shopify, Supabase, Clerk, PostHog — DPIAs on file.' },
../src/domains/admin/pages/ui/pages/PagesPage.tsx:156:      { title: 'Vendors', body: 'Shopify, Supabase, Clerk, PostHog — DPIAs on file.' },
../src/domains/admin/settings/ui/pages/SettingsPage.tsx:19:            Integrations (Shopify, Supabase, email, analytics)
../src/domains/admin/orders/ui/pages/OrdersPage.tsx:181:      subtitle="Prototype UI. Next: wire to Shopify (or Supabase mirror), then add search + actions."
../src/domains/admin/orders/ui/pages/OrdersPage.tsx:189:            {ordersSource === 'api' ? 'Supabase mirror' : 'Mock data'}
../src/domains/admin/catalog/ui/cards/ProductCard.tsx:9:  // Used for admin clarity when legacy/alias handles still exist in Supabase.
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:7:import { createSupabaseClient, isSupabaseConfigured } from '@/lib/supabase'
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1002:      const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1004:        setError('Missing Clerk JWT template `supabase` token. Check Clerk → JWT Templates.')
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1011:      const client = createSupabaseClient(token)
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1013:        setError('Supabase is not configured in this environment (missing VITE_SUPABASE_URL / VITE_SUPABASE_ANON_KEY).')
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1169:      // Fallback to in-repo product config when Supabase has no rows yet (common on fresh envs)
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1349:  // Send draft to iframe preview for live render (preview page does not read Supabase yet).
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1368:          'This environment is in config-fallback mode (no `cms_products` rows found). Saving is disabled until products are seeded in Supabase.',
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1372:      const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1374:        setError('Missing Clerk JWT template `supabase` token.')
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1377:      const client = createSupabaseClient(token)
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1379:        setError('Supabase is not configured in this environment.')
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1547:      {!isSupabaseConfigured ? (
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1549:          Supabase is not configured for the frontend (missing <span className="font-mono text-[12px]">VITE_SUPABASE_URL</span> /{' '}
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1550:          <span className="font-mono text-[12px]">VITE_SUPABASE_ANON_KEY</span>).
../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1556:          <span className="font-mono text-[12px]">cms_products</span> rows in Supabase for this environment. Saving is disabled until the
../src/domains/admin/blog/ui/pages/BlogsPage.tsx:250:      subtitle="Blog posts and metrics live in Supabase (cms_blogs + cms_blog_media)."
../src/domains/admin/blog/ui/pages/BlogsPage.tsx:606:        Next steps: hook this list to Supabase (cms_blogs), wire filters, and add blog detail page with live preview.
../src/domains/admin/shared/logic/clerkJwt.ts:1:export type ClerkSupabaseJwtPayload = {
../src/domains/admin/shared/logic/clerkJwt.ts:7:export function decodeClerkJwtPayload(token: string): ClerkSupabaseJwtPayload | null {
../src/domains/admin/shared/logic/clerkJwt.ts:14:    return JSON.parse(json) as ClerkSupabaseJwtPayload
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:4:import { createSupabaseClient } from '@/lib/supabase'
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:81:    const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:82:    const client = token ? createSupabaseClient(token) : null
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:97:    const token = await getToken({ template: 'supabase' }).catch(() => null)
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:98:    const client = token ? createSupabaseClient(token) : null
../src/domains/client/marketing/ui/sections/shop/final-cta-section/SpinWheelLocal.tsx:99:    if (!client) throw new Error('Supabase not configured')
../src/domains/platform/storage/supabase.ts:1:import { createClient } from '@supabase/supabase-js'
../src/domains/platform/storage/supabase.ts:2:import type { SupabaseClient } from '@supabase/supabase-js'
../src/domains/platform/storage/supabase.ts:4:const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
../src/domains/platform/storage/supabase.ts:5:const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY
../src/domains/platform/storage/supabase.ts:7:const clientCache = new Map<string, SupabaseClient>()
../src/domains/platform/storage/supabase.ts:9:const buildClient = (authToken?: string): SupabaseClient =>
../src/domains/platform/storage/supabase.ts:10:  createClient(supabaseUrl!, supabaseAnonKey!, {
../src/domains/platform/storage/supabase.ts:25:export const createSupabaseClient = (authToken?: string) => {
../src/domains/platform/storage/supabase.ts:26:  if (!supabaseUrl || !supabaseAnonKey) return null
../src/domains/platform/storage/supabase.ts:36:export const supabase = createSupabaseClient()
../src/domains/platform/storage/supabase.ts:38:export const isSupabaseConfigured = Boolean(supabase)
