timestamp: 2025-12-30_162511
source: .blackbox/.plans/2025-12-29_1909_backend-frontend-interchangeability-scalability-first-principles-loop/artifacts/snapshots/api-only-endpoints.txt
root: ..

=== exact: /api/admin/media/delete ===


=== exact: /api/admin/media/list ===


=== exact: /api/admin/media/list-all ===


=== exact: /api/admin/media/upsert ===

../scripts/upload-to-cloudinary.ts:34:      await fetch(`${API_BASE}/api/admin/media/upsert`, {
../scripts/run-upload.cjs:45:      const upsert = await fetch(`${API_BASE}/api/admin/media/upsert`, {

=== exact: /api/cloudinary/sign ===

../src/domains/admin/catalog/ui/pages/ProductsPage.tsx:1226:            const res = await fetch('/api/cloudinary/sign', {

=== exact: /api/internal/recovery-cron ===

../docs/05-planning/future-features/Magic Cart Recovery System/tech-spec.md:92:## Cron job (Vercel /api/internal/recovery-cron)

=== exact: /api/newsletter/subscribe ===

../src/ui/components/NewsletterModal.tsx:51:      const res = await fetch('/api/newsletter/subscribe', {
../src/ui/components/GlobalFooter.tsx:25:      const res = await fetch('/api/newsletter/subscribe', {
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-090.md:67:- Add a POST endpoint `/api/newsletter/subscribe` that:
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-090.md:87:- `src/ui/components/GlobalFooter.tsx`: replaced the mailto CTA with an email form that posts to `/api/newsletter/subscribe` and shows inline status messages.
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-090.md:96:4. Simulate API failure (e.g., block `/api/newsletter/subscribe`) → shows error message.
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-023.md:47:4) You’d see the code, but no real signup persisted (no request to `/api/newsletter/subscribe`).
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-023.md:57:- Requires the `/api/newsletter/subscribe` endpoint to be reachable in the deployed environment (it already exists and is used by the footer signup).
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-023.md:74:- Add a `loading` state and submit handler that POSTs `{ email, source }` to `/api/newsletter/subscribe`.
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-023.md:82:- Submitting the form triggers a POST to `/api/newsletter/subscribe`.
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-023.md:97:  - now POSTs to `/api/newsletter/subscribe`
../src/domains/client/marketing/ui/sections/shop/email-capture-band/EmailCaptureBand.tsx:34:      const res = await fetch('/api/newsletter/subscribe', {
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-040.md:63:- Newsletter submission needs a backend endpoint. (A `/api/newsletter/subscribe` handler already exists in this repo.)
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-040.md:83:  - Make the email input editable, validate email, and submit to `/api/newsletter/subscribe`.
../docs/06-quality/feedback/ui-issue-tracker/ui-issues/issue-040.md:108:  - Added editable email input + submit handler to `/api/newsletter/subscribe`

=== exact: /api/og ===


=== exact: /api/orders/list ===

../docs/02-engineering/technical/shopify-architecture.md:31:  - Legacy/customer helpers: `/api/orders/list`, `/api/orders/get?id=...`, `/api/orders/by-email`, `/api/orders/by-name`.

=== exact: /api/shopify/backfill/customers ===


=== exact: /api/shopify/backfill/orders ===


=== exact: /api/shopify/billing/create ===

../docs/05-planning/plans/shopify-headless-implementation-plan.md:66:- `billing.activateTestPlan(shop)` — appSubscriptionCreate (Dev) (Done: `/api/shopify/billing/create`).

=== exact: /api/shopify/settings ===

../docs/05-planning/plans/shopify-headless-implementation-plan.md:65:- `settings.get/save(shop)` — `ShopSettings` (Done: `/api/shopify/settings`).
../docs/05-planning/plans/shopify-headless-implementation-plan.md:71:- Settings: `/api/shopify/settings` (GET/POST).

=== exact: /api/shopify/sync ===


=== exact: /api/shopify/webhooks/checkouts-create ===


=== exact: /api/shopify/webhooks/checkouts-update ===


=== exact: /api/shopify/webhooks/products_create ===

../scripts/test-webhook.mjs:73:console.log(`Sending webhook to ${appUrl}/api/shopify/webhooks/products_create...`);
../scripts/test-webhook.mjs:77:        const res = await fetch(`${appUrl}/api/shopify/webhooks/products_create`, {

=== exact: /api/storefront/cart/restore ===

../docs/05-planning/future-features/magic-cart-recovery-system.md:46:- Client handler: on `restore` param, POST token to `/api/storefront/cart/restore` → validates signature/expiry, fetches Shopify cart, or loads stored payload, then hydrates Zustand store and navigates to cart page.
../docs/05-planning/future-features/magic-cart-recovery-system.md:67:4) **Share endpoints (1d):** Build `/api/storefront/cart/share` and `/api/storefront/cart/restore`; HMAC signing; optional Supabase `cart_shares` table for non-Shopify carts.
../docs/05-planning/future-features/Magic Cart Recovery System/implementation-plan.md:28:13. Add API: `POST /api/storefront/cart/restore` → validates token, loads payload/cart, replays lines, returns checkoutUrl.
../docs/05-planning/future-features/Magic Cart Recovery System/tech-spec.md:88:- `POST /api/storefront/cart/restore`

=== exact: /api/storefront/cart/share ===

../docs/05-planning/future-features/Magic Cart Recovery System/implementation-plan.md:27:12. Add API: `POST /api/storefront/cart/share` → stores payload, returns signed restore URL.
../docs/05-planning/future-features/Magic Cart Recovery System/tech-spec.md:85:- `POST /api/storefront/cart/share`
../docs/05-planning/future-features/magic-cart-recovery-system.md:43:- New endpoint `POST /api/storefront/cart/share` (server) returns `{ restoreUrl }`.
../docs/05-planning/future-features/magic-cart-recovery-system.md:67:4) **Share endpoints (1d):** Build `/api/storefront/cart/share` and `/api/storefront/cart/restore`; HMAC signing; optional Supabase `cart_shares` table for non-Shopify carts.
