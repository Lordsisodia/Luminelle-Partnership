<!DOCTYPE html><!-- Last Published: Tue Dec 23 2025 09:52:53 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="www.tooljet.com" data-wf-page="642d8002d4d7fb2ca84abbe8" data-wf-site="6266634263b9179f76b2236e" lang="en"><head><meta charset="utf-8"/><title>Not Found</title><meta content="Not Found" property="og:title"/><meta content="Not Found" property="twitter:title"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="noindex" name="robots"/><link href="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/css/tooljet.webflow.shared.aea224562.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com" rel="preconnect"/><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous"/><script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Inter:100,200,300,regular,500,600,700,800,900,100italic,200italic,300italic,italic,500italic,600italic,700italic,800italic,900italic"]  }});</script><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/67a98e48d6c285bfc1c51334_favicon%20(1).ico" rel="shortcut icon" type="image/x-icon"/><link href="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/67a98e613501ebd759e30282_favicon%20(2).ico" rel="apple-touch-icon"/><link href="https://www.tooljet.com/404" rel="canonical"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FDN6L63297"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('set', 'developer_id.dZGVlNj', true);gtag('js', new Date());gtag('config', 'G-FDN6L63297');</script><!-- Factors script -->
<script>window.faitracker=window.faitracker||function(){this.q=[];var t=new CustomEvent("FAITRACKER_QUEUED_EVENT");return this.init=function(t,e,a){this.TOKEN=t,this.INIT_PARAMS=e,this.INIT_CALLBACK=a,window.dispatchEvent(new CustomEvent("FAITRACKER_INIT_EVENT"))},this.call=function(){var e={k:"",a:[]};if(arguments&&arguments.length>=1){for(var a=1;a<arguments.length;a++)e.a.push(arguments[a]);e.k=arguments[0]}this.q.push(e),window.dispatchEvent(t)},this.message=function(){window.addEventListener("message",function(t){"faitracker"===t.data.origin&&this.call("message",t.data.type,t.data.message)})},this.message(),this.init("c4rgfujgx6jef4722rcjfhj7dlmcipih",{host:"https://api.factors.ai"}),this}(),function(){var t=document.createElement("script");t.type="text/javascript",t.src="https://app.factors.ai/assets/factors.js",t.async=!0,(d=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,d)}();</script>
<!-- End Factors script -->
<link rel="shortcut icon" href="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/67af1907fa22675f7c9a19f8_tj_logo_symbol_only_contained_profile.png" type="image/x-icon" />





<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async src="//js.hs-scripts.com/39494431.js"></script>
<!-- End of HubSpot Embed Code -->



<!-- Google Tag Manager staging
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NRGRVTG8');</script>
 End Google Tag Manager staging-->


<script>(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"187184530", enableAutoSpaTracking: true};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");</script>




<noscript><style>html { display: block !important; }</style></noscript>









<!-- Google Tag Manager latest for staging -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NRGRVTG8');</script>
<!-- End Google Tag Manager -->

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5L8R522S');</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-FDN6L63297"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FDN6L63297');
</script>
<style>
  .faq{
cursor: pointer
  
  }
</style>



<!-- Essential preconnects only -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.prod.website-files.com" crossorigin>
<link rel="preconnect" href="https://assets.website-files.com" crossorigin>


<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"></noscript>

<script>
  (function storeOriginalReferrer() {
    if (!localStorage.getItem("tooljet_original_referrer")) {
      const ref = document.referrer || "direct";
      localStorage.setItem("tooljet_original_referrer", ref);
      console.log("üíæ Stored original referrer:", ref);
    }
  })();
</script>

<script>
  function changeColorScheme() {
    console.log("function called");
    let html = document.querySelector("html");
    if (html.style.colorScheme === 'dark') {
      html.style.colorScheme = '';
    }
  }

  window.hsConversationsOnReady = [() => {
    // call your function or style iframe here
    changeColorScheme();

    // Example: style the iframe itself
    const iframe = document.querySelector('#hubspot-messages-iframe-container iframe');
    if (iframe) {
      iframe.style.borderRadius = '12px';
      iframe.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
    }
  }];
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NH0ZN8H7KC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NH0ZN8H7KC');
</script>

<script>
  const url = new URL(window.location);
  const params = new URLSearchParams(url.search);

  const trackingParams = ["_gl", "_ga", "__hstc", "__hssc", "__hsfp"];

  trackingParams.forEach(param => params.delete(param));

  if ([...params].length !== url.searchParams.length) {
    const newUrl = url.origin + url.pathname + (params.toString() ? '?' + params.toString() : '');
    window.history.replaceState({}, document.title, newUrl);
  }
</script>
</head><body><div class="utility-page-wrap"><div class="utility-page-content"><img src="https://cdn.prod.website-files.com/static/page-not-found.211a85e40c.svg" alt=""/><h2>Page Not Found</h2><div>The page you are looking for doesn&#x27;t exist or has been moved</div></div></div><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6266634263b9179f76b2236e" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/js/webflow.schunk.36b8fb49256177c8.js" type="text/javascript"></script><script src="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/js/webflow.schunk.d125e3de7bd1c104.js" type="text/javascript"></script><script src="https://cdn.prod.website-files.com/6266634263b9179f76b2236e/js/webflow.563ce6ec.a871bca8b4df18d7.js" type="text/javascript"></script><script >
(function () {
    const hubspotKeys = ['__hstc', '__hssc', '__hsfp'];
    const marketingKeys = ['utm_', '_hs', '_gl', 'li'];
    const exactKeys = ['gclid', '_ga', '_gid', 'msclkid', 'fbclid', 'li_fat_id', 'gbraid'];
    function getStoredParams() {
        const keys = JSON.parse(localStorage.getItem("storedQueryParamsKeys") || "[]");
        const params = {};
        keys.forEach(key => {
            const val = localStorage.getItem(key);
            if (val) params[key] = val;
        });
        return params;
    }
    function storeUTMParams() {
        try {
            const url = new URL(window.location.href);
            const params = new URLSearchParams(url.search);
            const storedParams = {};
            const keysToStore = [];
            for (const [key, value] of params.entries()) {
                const isMatch = exactKeys.includes(key) || marketingKeys.some(prefix => key.startsWith(prefix)) || hubspotKeys.includes(key);
                if (isMatch && value && value !== '[object Object]') {
                   localStorage.setItem(key, value);
                    storedParams[key] = value;
                    keysToStore.push(key);
                }
            }
            if (keysToStore.length > 0) {
                localStorage.setItem("storedQueryParamsKeys", JSON.stringify(keysToStore));
            }
        } catch (e) {
            console.warn('UTM store error:', e);
        }
    }
    function appendTrackingToLinks() {
        const utmParams = getStoredParams();
        const links = document.querySelectorAll('a[href]');
        const allowedDomains = ['tooljet.ai', 'tooljet.com', 'tooljet.webflow.io'];
        links.forEach(link => {
            const href = link.getAttribute('href');
            if (!href || href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('tel:')) return;
            const tempA = document.createElement('a');
            tempA.href = href;
            const isInternal = allowedDomains.some(domain => tempA.hostname.includes(domain));
            if (!isInternal) return;
            const linkParams = new URLSearchParams(tempA.search);
            Object.entries(utmParams).forEach(([key, value]) => {
                if (!linkParams.has(key)) linkParams.set(key, value);
            });
            const newHref = tempA.origin + tempA.pathname + (linkParams.toString() ? '?' + linkParams.toString() : '') + tempA.hash;
            link.setAttribute('href', newHref);
        });
    }
    // NEW: Function to build URL with stored UTM parameters
    function buildUrlWithStoredParams(baseUrl) {
        try {
            const storedParams = getStoredParams();
            if (Object.keys(storedParams).length === 0) {
                return baseUrl;
            }
            const url = new URL(baseUrl, window.location.origin);
            const urlParams = new URLSearchParams(url.search);
            // Add stored parameters that don't already exist in the URL
            Object.entries(storedParams).forEach(([key, value]) => {
                if (!urlParams.has(key)) {
                    urlParams.set(key, value);
                }
            });
            const finalUrl = url.origin + url.pathname +
                (urlParams.toString() ? '?' + urlParams.toString() : '') +
                url.hash;
            return finalUrl;
        } catch (e) {
            console.warn('Error building URL with params:', e);
            return baseUrl;
        }
    }
    
    function clearStoredUTMParams() {
        try {
            const storedKeys = JSON.parse(localStorage.getItem("storedQueryParamsKeys") || "[]");
            storedKeys.forEach(key => {
                localStorage.removeItem(key);
            });
            localStorage.removeItem("storedQueryParamsKeys");
        } catch (e) {
            console.warn('Error clearing UTM params:', e);
        }
    }
    // Run when the page loads
    window.addEventListener('load', () => {
        clearStoredUTMParams(); 
        storeUTMParams();
        appendTrackingToLinks();
    });
    // Run before the user leaves the page
    window.addEventListener('beforeunload', () => {
        clearStoredUTMParams();
    });
    // Expose functions for manual use
    window.clearStoredUTMParams = clearStoredUTMParams;
    window.getStoredUTMParams = getStoredParams; // NEW: Access stored params
    window.buildUrlWithStoredParams = buildUrlWithStoredParams; // NEW: Build URLs with UTM params
})();
</script>

<script>
 
document.addEventListener("DOMContentLoaded", () => {
    const CREATE_ACCOUNT_SLUG = '/create-account';

    document.querySelectorAll("#try-for-free-btn, #try-for-free-tc, #try-for-free-tc-pro, #try-for-free-tc-team").forEach(button => {
    console.log(button, "button");

        button.addEventListener("click", (e) => {
            e.preventDefault();
            localStorage.setItem("signupFlow", "popup");
            window.location.href = window.buildUrlWithStoredParams(CREATE_ACCOUNT_SLUG);
           
        });
    });
});

</script>


<!--
<script>
function getUTMParameters(){
    var queryString = window.location.search;
    var urlParams = new URLSearchParams(queryString);
    var utmParams = {};
    urlParams.forEach((value, key) => {
        localStorage.setItem(key, value); // Store in localStorage
        utmParams[key] = value; // Store in object
    });
    localStorage.setItem("storedQueryParamsKeys", JSON.stringify(Object.keys(utmParams)));
return utmParams;
}
function getUTMParamsFromLocalStorage() {
    var storedParams = {};
    var storedKeys = JSON.parse(localStorage.getItem("storedQueryParamsKeys")) || []; // Get only stored keys
    storedKeys.forEach((key) => {
        storedParams[key] = localStorage.getItem(key);
    });
    return storedParams;
}
getUTMParameters()
// Function to append UTM params to links that match a specific URL pattern
function appendUTMParamsToLinks() {
    var utmParams = getUTMParamsFromLocalStorage();
    var links = document.getElementsByTagName('a');
    var allowedDomains = ['www.tooljet.com', 'blog.tooljet.com', 'www.tooljet.ai', 'blog.tooljet.ai','https://tooljet.webflow.io/'];
    for (var i = 0; i < links.length; i++) {
        var link = links[i];
        var href = link.getAttribute('href');
        if (!href) continue;
        var anchorElement = document.createElement('a');
        anchorElement.href = href;
        if (allowedDomains && Object.keys(utmParams).length > 0) {
            var queryParams = [];
            Object.keys(utmParams).forEach(function(key) {
                var decodedValue = decodeURIComponent(utmParams[key]);
                queryParams.push(key + '=' + encodeURIComponent(decodedValue));
            });
            var separator = anchorElement.search ? '&' : '?';
            link.setAttribute('href', anchorElement.href + separator + queryParams.join('&'));
        }
    }
  setTimeout(function() {
        removeUTMParamsFromURL();
    }, 1000);
}
function removeUTMParamsFromURL() {
    if (!window.history || !window.history.replaceState) {
        console.log('History API not supported');
        return;
    }
    var currentUrl = new URL(window.location.href);
    var urlParams = new URLSearchParams(currentUrl.search);
    var utmParams = JSON.parse(localStorage.getItem("storedQueryParamsKeys")) || [];
    var isAnyUtmParamsRemoved = false;
    utmParams.forEach(function(param) {
        if (urlParams.has(param)) {
            urlParams.delete(param);
            isAnyUtmParamsRemoved = true;
        }
    });
    if (isAnyUtmParamsRemoved) {
        var newSearch = urlParams.toString();
        var cleanUrl = currentUrl.pathname + (newSearch ? '?' + newSearch : '') + currentUrl.hash;
        window.history.replaceState(window.history.state, document.title, cleanUrl);
    }
}
function removeUTMParamsFromLocalStorage() {
    var storedKeys = JSON.parse(localStorage.getItem("storedQueryParamsKeys")) || [];
    storedKeys.forEach(function(key) {
        localStorage.removeItem(key);
    });
    localStorage.removeItem("storedQueryParamsKeys");
}
window.addEventListener('beforeunload', removeUTMParamsFromLocalStorage);
window.onload = appendUTMParamsToLinks;
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-11229537253"></script>
<script defer>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-11229537253');
</script>
-->
<!-- Google Tag Manager (noscript) staging
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRGRVTG8"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
 End Google Tag Manager (noscript) staging-->
<!-- Google Ads Tracking -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-11229537253"></script>
<script defer>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-11229537253');
</script>



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5L8R522S"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>







<!-- Google Tag Manager (noscript) latest for staging -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRGRVTG8"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<script>
document.addEventListener("DOMContentLoaded", () => {
  const playButton = document.querySelector(".play-btn");

  if (!playButton) {
    console.warn("Play button not found (.play-btn)");
    return;
  }

  playButton.addEventListener("click", () => {
    console.log("Play button clicked ‚úÖ");

    // Ensure GA4 / dataLayer is ready
    window.dataLayer = window.dataLayer || [];

    const eventData = {
      event: 'video_play',
      event_category: 'Videos',
      event_label: 'Homepage Hero Video',
      value: 1,
      debug_mode: true // ensures DebugView picks it up
    };

    // Push to dataLayer
    window.dataLayer.push(eventData);

    console.log("GA4 Event pushed to dataLayer ‚úÖ");
    console.log("Event data:", eventData);

    // Optional: fire gtag() as well if available
    if (typeof gtag === "function") {
      gtag('event', 'video_play', eventData);
      console.log("GA4 gtag() fired ‚úÖ");
    } else {
      console.warn("GA4 gtag() not ready ‚ùå");
    }
  });
});
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const referrer = document.referrer;

    if (referrer) {
      // Extract domain name for cleaner logging
      try {
        const refDomain = new URL(referrer).hostname;
        console.log("Referrer Domain:", refDomain);
        console.log("Full Referrer URL:", referrer);
      } catch (e) {
        console.log("Referrer (raw):", referrer);
      }
    } else {
      console.log("No referrer found ‚Äî user opened the page directly or referrer was blocked.");
    }
  });
</script>

<!--ToolJet Original Source Tracker -->
<script>
(function() {
  const ref = document.referrer;
  const urlParams = new URLSearchParams(window.location.search);
  const hostname = window.location.hostname;

  function setSource(key, value) {
    localStorage.setItem(key, value);
    document.cookie = `${key}=${value}; path=/; max-age=2592000`; // 30 days
  }

  function categorizeReferrer(domain) {
    const social = ['facebook.com', 'twitter.com', 'linkedin.com', 'youtube.com', 'instagram.com', 't.co', 'reddit.com'];
    const search = ['google.com', 'bing.com', 'yahoo.com', 'duckduckgo.com'];
    const mail = ['mail.google.com', 'outlook.live.com', 'mail.yahoo.com'];

    if (social.some(s => domain.includes(s))) return { source: domain, medium: 'organic_social' };
    if (search.some(s => domain.includes(s))) return { source: domain, medium: 'organic_search' };
    if (mail.some(s => domain.includes(s))) return { source: domain, medium: 'email_or_rss' };
    return { source: domain, medium: 'referral' };
  }

  if (!localStorage.getItem('original_source')) {
    if (urlParams.get('utm_source')) {
      const sourceData = {
        utm_source: urlParams.get('utm_source'),
        utm_medium: urlParams.get('utm_medium'),
        utm_campaign: urlParams.get('utm_campaign'),
      };
      setSource('original_source', JSON.stringify(sourceData));
    } else if (ref && !ref.includes(hostname)) {
      const refDomain = new URL(ref).hostname;
      const cat = categorizeReferrer(refDomain);
      const sourceData = {
        utm_source: cat.source,
        utm_medium: cat.medium,
        utm_campaign: '(none)',
      };
      setSource('original_source', JSON.stringify(sourceData));
    }
  }

  console.log('Original Source:', localStorage.getItem('original_source'));
})();
</script>
<script>
(function() {
  // Capture referrer only if it's from an external domain
  var currentRef = document.referrer;
  if (currentRef && !currentRef.includes(window.location.hostname)) {
    localStorage.setItem('original_referrer', currentRef);
  }
})();
</script>
<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/39494431.js"></script>
<!-- End of HubSpot Embed Code -->


<script>
(function() {
  // Run only once per session
  if (sessionStorage.getItem('utm_appended')) return;

  const ref = document.referrer;
  const url = new URL(window.location.href);

  // Exit if already has UTM params or no referrer
  if (!ref || url.searchParams.toString().match(/utm_/)) return;

  // Validate referrer
  let refUrl;
  try {
    refUrl = new URL(ref);
    if (!refUrl.protocol.startsWith("http")) return;
  } catch {
    return; // invalid or empty referrer, stop
  }

  // Ensure ref is truly external
  if (refUrl.hostname.includes(window.location.hostname)) return;
  
  
  // Define referrer ‚Üí UTM mapping
  const refMap = [
    { key: "youtube.com", utm: "utm_source=youtube&utm_medium=social&utm_campaign=video" },
    { key: "reddit.com", utm: "utm_source=reddit&utm_medium=social&utm_campaign=post" },
    { key: "linkedin.com", utm: "utm_source=linkedin&utm_medium=social&utm_campaign=post" },
    { key: "substack.com", utm: "utm_source=substack&utm_medium=social&utm_campaign=post" },
    { key: "dev.to", utm: "utm_source=dev.to&utm_medium=social&utm_campaign=post" },
    { key: "daily.dev", utm: "utm_source=daily.dev&utm_medium=social&utm_campaign=post" },
    { key: "facebook.com", utm: "utm_source=facebook&utm_medium=social&utm_campaign=post" },
    { key: "instagram.com", utm: "utm_source=instagram&utm_medium=social&utm_campaign=post" },
    { key: "twitter.com", utm: "utm_source=twitter&utm_medium=social&utm_campaign=post" },
    { key: "t.co", utm: "utm_source=twitter&utm_medium=social&utm_campaign=post" },
    { key: "quora.com", utm: "utm_source=quora&utm_medium=social&utm_campaign=post" },
    { key: "tiktok.com", utm: "utm_source=tiktok&utm_medium=social&utm_campaign=post" },
    { key: "whatsapp.com", utm: "utm_source=whatsapp&utm_medium=social&utm_campaign=share" },
    { key: "claude.ai", utm: "utm_source=claude" }
  ];

  // Find matching referrer
  const match = refMap.find(item => ref.includes(item.key));
  if (!match) return;

  // Append UTM parameters
  const newUrl = url.href + (url.search ? '&' : '?') + match.utm;

  // Prevent infinite redirect loops
  sessionStorage.setItem('utm_appended', 'true');

  // Redirect with UTM params
  window.location.replace(newUrl);
})();
</script>

<script>
  // 1. Programmatically add 'defer' to all external scripts 
  // that don't already have 'async' or 'defer'.
  document.querySelectorAll('script[src]').forEach(s => {
    // Only apply 'defer' if the script is an external file and lacks an existing defer/async attribute
    if (s.hasAttribute('src') && !s.hasAttribute('async') && !s.hasAttribute('defer')) {
      s.setAttribute('defer', '');
    }
  });

  // 2. Dynamically load the WebFont loader (the previously blocking request)
  // after the DOM is ready. This avoids blocking the initial render.
  document.addEventListener("DOMContentLoaded", function() {
    var wf = document.createElement('script');
    wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js';
    wf.async = true; // Use async for independent third-party scripts
    document.head.appendChild(wf);
  });
</script>

<script>
  function changeColorScheme() {
    console.log("changeColorScheme() called");
    const html = document.querySelector("html");
    if (html.style.colorScheme === 'dark') {
      html.style.colorScheme = '';
      console.log("Color scheme changed to default");
    }
  }

  function onHubSpotChatReady() {
    console.log("HubSpot chat ready");
    changeColorScheme();

    const iframe = document.querySelector('#hubspot-messages-iframe-container iframe');
    if (iframe) {
      iframe.style.borderRadius = '12px';
      iframe.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
      console.log("Iframe styled");
    }
  }

  // Make sure we don't miss the event
  window.hsConversationsOnReady = window.hsConversationsOnReady || [];
  window.hsConversationsOnReady.push(onHubSpotChatReady);
</script>



<script>
  /* Hide analytics tracking parameters (e.g., UTM, _gl, etc.) from the URL */
  
document.addEventListener("DOMContentLoaded", () => {
  const autoParams = ["_gl", "_ga", "_gid", "gclid", "gbraid", "wbraid", "msclkid"];

  const url = new URL(window.location.href);
  let changed = false;

  autoParams.forEach(param => {
    if (url.searchParams.has(param)) {
      url.searchParams.delete(param);
      changed = true;
    }
  });

  if (changed) {
    window.history.replaceState({}, "", url.pathname + (url.searchParams.toString() ? "?" + url.searchParams.toString() : "") + url.hash);
  }
});
</script>

<script>
// UTM Handler Script - Enhanced version with conflict avoidance
window.addEventListener("load", () => {
  // Only run if our UTM handler hasn't been initialized
  if (window.utmHandlerInitialized) return;
  window.utmHandlerInitialized = true;
  
  // Check if current page has UTM parameters
  const urlParams = new URLSearchParams(window.location.search);
  const hasUTMInCurrentUrl = Array.from(urlParams.keys()).some((key) =>
    key.startsWith("utm_")
  );
  
  if (hasUTMInCurrentUrl) {
    // User came with UTM params - store them and set session flag
    storeUTMParams();
    sessionStorage.setItem("utmSessionActive", "true");
  } else {
    // User came without UTM params
    // Check if this is an internal navigation from a page that had UTMs
    const referrer = document.referrer;
    const currentDomain = window.location.hostname;
    const isInternalNavigation = referrer && referrer.includes(currentDomain);
    const utmSessionActive = sessionStorage.getItem("utmSessionActive") === "true";
    
    if (isInternalNavigation && utmSessionActive) {
      // User is navigating within the same session that had UTMs - restore them
      applyUTMParamsFromStorage();
    } else {
      // Fresh visit without UTMs - clear any stored UTMs and session flag
      sessionStorage.removeItem("utmParams");
      sessionStorage.removeItem("utmSessionActive");
    }
  }
  
  appendTrackingToLinks();
});

function clearStoredUTMParams() {
  sessionStorage.removeItem("utmParams");
  sessionStorage.removeItem("utmSessionActive");
}

function storeUTMParams() {
  const urlParams = new URLSearchParams(window.location.search);
  const storedParams = JSON.parse(sessionStorage.getItem("utmParams") || "{}");
  let hasNewParams = false;

  urlParams.forEach((value, key) => {
    if (key.startsWith("utm_")) {
      storedParams[key] = value;
      hasNewParams = true;
    }
  });

  if (hasNewParams) {
    sessionStorage.setItem("utmParams", JSON.stringify(storedParams));
  }
}

function appendTrackingToLinks() {
  const storedUTM = JSON.parse(sessionStorage.getItem("utmParams") || "{}");
  if (!storedUTM || Object.keys(storedUTM).length === 0) return;

  // Add event listeners for documentation and blog links
  const documentationLinks = document.querySelectorAll("#documentation-link");
  documentationLinks.forEach(link => {
    if (!link.hasAttribute('data-utm-handler-attached')) {
      link.setAttribute('data-utm-handler-attached', 'true');
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const url = new URL(this.href);
        Object.entries(storedUTM).forEach(([key, value]) => {
          url.searchParams.set(key, value);
        });
        window.location.href = url.toString();
      });
    }
  });

  const blogLinks = document.querySelectorAll("#blogs-link");
  blogLinks.forEach(link => {
    if (!link.hasAttribute('data-utm-handler-attached')) {
      link.setAttribute('data-utm-handler-attached', 'true');
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const url = new URL(this.href);
        Object.entries(storedUTM).forEach(([key, value]) => {
          url.searchParams.set(key, value);
        });
        window.location.href = url.toString();
      });
    }
  });

  // Also append UTM params to all internal links (but be more selective)
  const links = document.getElementsByTagName('a');
  const allowedDomains = ['www.tooljet.com', 'blog.tooljet.com', 'www.tooljet.ai', 'blog.tooljet.ai', 'tooljet.webflow.io','staging-cb4e-exuberantautomation9.wpcomstaging.com','tooljet-pr-13946.onrender.com','accounts.google.com'];
  
  for (let i = 0; i < links.length; i++) {
    const link = links[i];
    const href = link.getAttribute('href');
    if (!href || link.hasAttribute('data-utm-handler-attached')) continue;
    
    try {
      const url = new URL(href, window.location.origin);
      const isInternalLink = allowedDomains.some(domain => url.hostname.includes(domain));
      
      // Only handle links that don't already have specific UTM handling
      if (isInternalLink && !link.id && !link.classList.contains('utm-handled')) {
        link.setAttribute('data-utm-handler-attached', 'true');
        const originalHref = link.href;
        link.addEventListener("click", function (e) {
          const storedUTM = JSON.parse(sessionStorage.getItem("utmParams") || "{}");
          if (storedUTM && Object.keys(storedUTM).length > 0) {
            e.preventDefault();
            const url = new URL(originalHref);
            Object.entries(storedUTM).forEach(([key, value]) => {
              url.searchParams.set(key, value);
            });
            window.location.href = url.toString();
          }
        });
      }
    } catch (e) {
      // Skip invalid URLs
      continue;
    }
  }
}

function applyUTMParamsFromStorage() {
  const url = new URL(window.location.href);
  const searchParams = url.searchParams;
  const hasUTMInUrl = Array.from(searchParams.keys()).some((key) =>
    key.startsWith("utm_")
  );
  if (hasUTMInUrl) return;

  const storedParams = JSON.parse(sessionStorage.getItem("utmParams") || "{}");
  if (!storedParams || Object.keys(storedParams).length === 0) return;

  Object.entries(storedParams).forEach(([key, value]) => {
    searchParams.set(key, value);
  });

  window.history.replaceState({}, "", url);
}

</script><script src="https://cdn.schema-flow.com/script.min.js" type="text/javascript" integrity="sha384-lkeaHi6CUqjssPG+DrkxfgqSYKpysN7Rgo/uRqMbpVgt0Kpeqx9lBgjZ+g7HBfbt" crossorigin="anonymous"></script></body></html>